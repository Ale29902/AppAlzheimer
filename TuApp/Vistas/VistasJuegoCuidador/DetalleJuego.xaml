<?xml version="1.0" encoding="utf-8" ?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:TuApp.VistasModelo"
             x:Class="TuApp.Vistas.DetalleJuego"
             BackgroundColor="{DynamicResource BasePageColor}">

    <ContentPage.BindingContext>
        <vm:PreguntaViewModel />
    </ContentPage.BindingContext>

    <Grid RowDefinitions="Auto, * , Auto" Padding="20" BackgroundColor="{DynamicResource BaseTabbedPageColor}">

        <!-- Lista deslizable -->
        <CollectionView Grid.Row="1"
                        ItemsSource="{Binding ListaPregunta}"
                        SelectionMode="Single">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Style="{StaticResource TileButtonStyle}">
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Tapped="Juego_Tapped" CommandParameter="{Binding}" />
                        </Frame.GestureRecognizers>

                        <Grid ColumnDefinitions="*, Auto"
                              RowDefinitions="Auto, Auto"
                              VerticalOptions="Center">

                            <!-- Descripción -->
                            <Label Grid.Row="0" Grid.Column="0"
                                   Text="{Binding Descripcion}"
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   TextColor="{DynamicResource BaseTextColor}"
                                   VerticalOptions="Center"
                                   HorizontalOptions="Start" />

                            <!-- Imagen debajo de la descripción -->
                            <Image Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
                                   Source="{Binding ImagenSource}"
                                   HeightRequest="160"
                                   Aspect="AspectFit"
                                   VerticalOptions="Center"
                                   Margin="0,10,0,0" />

                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <!-- Botón flotante "+" -->
        <Button Text="+"
                FontSize="36"
                FontAttributes="Bold"
                Padding="0"
                Clicked="AgregarPregunta_Clicked"
                WidthRequest="60"
                HeightRequest="60"
                CornerRadius="30"
                BackgroundColor="{DynamicResource PrimaryColor}"
                TextColor="{DynamicResource White}"
                HorizontalOptions="Center"
                VerticalOptions="End"
                Grid.Row="2"
                Margin="0,10">
            <Button.Shadow>
                <Shadow Brush="#55000000"
                        Offset="0,4"
                        Radius="8"
                        Opacity="0.4" />
            </Button.Shadow>
        </Button>

    </Grid>
</ContentPage>
